# 🎮 记忆翻牌游戏 - 使用说明

## ⚠️ CORS 问题说明

**为什么直接打开 `dist/index.html` 会报错？**

当你直接双击打开 HTML 文件时，浏览器使用 `file://` 协议，而不是 `http://` 协议。现代浏览器为了安全，不允许 `file://` 协议加载 ES 模块（`type="module"`），会报 CORS 错误。

---

## ✅ 三种解决方案

### 方案 1：使用本地服务器（开发推荐）⭐

构建后使用 Vite 预览服务器：

```bash
# 1. 构建项目
npm run build

# 2. 启动预览服务器
npm run preview

# 3. 在浏览器打开显示的地址（通常是 http://localhost:4173）
```

**优点：**
- ✅ 完全模拟生产环境
- ✅ 支持热重载
- ✅ 可以测试所有功能

**缺点：**
- ❌ 需要运行服务器
- ❌ 不能直接分享文件

---

### 方案 2：独立 HTML 文件（分享推荐）⭐⭐⭐

生成一个包含所有代码的单 HTML 文件：

```bash
# 构建独立HTML文件
npm run build:standalone
```

这会在项目根目录生成 `game-standalone.html`

**使用方式：**
- 直接双击 `game-standalone.html` 在浏览器打开 ✨
- 或者分享给朋友，他们也可以直接打开
- 或者上传到任何地方（网盘、邮件等）

**优点：**
- ✅ **可以直接双击打开，无需服务器** 🎯
- ✅ 单文件，便于分享
- ✅ 所有代码都在文件内，无需网络
- ✅ 适合作为附件或存档

**缺点：**
- ❌ 文件较大（~70KB）
- ❌ 不便于 CDN 缓存

**文件位置：**
```
E:\code\AIGame\game-standalone.html  ← 直接打开这个！
```

---

### 方案 3：使用 Python 临时服务器（快速测试）⭐

如果你已经安装了 Python：

```bash
# 进入 dist 目录
cd E:\code\AIGame\dist

# Python 3
python -m http.server 8000

# 或者 Python 2
python -m SimpleHTTPServer 8000

# 然后在浏览器打开
http://localhost:8000
```

**优点：**
- ✅ 快速启动
- ✅ 无需额外工具

**缺点：**
- ❌ 需要安装 Python
- ❌ 需要手动启动

---

## 📊 三种方案对比

| 特性 | Vite 预览 | 独立 HTML ⭐ | Python 服务器 |
|------|----------|------------|--------------|
| **直接双击打开** | ❌ | ✅ | ❌ |
| **无需服务器** | ❌ | ✅ | ❌ |
| **便于分享** | ❌ | ✅ | ❌ |
| **文件数量** | 3个 | 1个 | 3个 |
| **加载速度** | 快 | 快 | 快 |
| **适合开发** | ✅ | ❌ | ⚠️ |
| **适合分发** | ❌ | ✅ | ❌ |

---

## 🚀 快速开始指南

### 我想立即试玩游戏

```bash
npm run build:standalone
```

然后双击打开 `game-standalone.html` ✨

### 我想开发和调试

```bash
npm run dev
```

在浏览器打开 `http://localhost:5173`

### 我想部署到服务器

```bash
npm run build
```

上传 `dist/` 目录到服务器

### 我想嵌入到其他网站

```bash
npm run build:single
```

使用 `dist-single/memory-game.js` 和 `dist-single/index.html`

---

## 📝 构建命令总结

| 命令 | 输出 | 用途 |
|------|------|------|
| `npm run dev` | 开发服务器 | 本地开发 |
| `npm run build` | `dist/` (3文件) | Web 部署 |
| `npm run build:single` | `dist-single/` (2文件) | SDK 分发 |
| `npm run build:standalone` | `game-standalone.html` | **直接打开** ⭐ |
| `npm run preview` | 预览服务器 | 测试构建 |

---

## 💡 使用建议

**我想：**

1. **现在就玩游戏** → 用 `game-standalone.html` ✨
2. **分享给朋友** → 发送 `game-standalone.html`
3. **部署到网站** → 上传 `dist/` 目录
4. **嵌入到博客** → 使用 `dist-single/memory-game.js`
5. **本地开发** → `npm run dev`

---

## 🔧 技术说明

### 为什么 game-standalone.html 可以直接打开？

因为它：
1. ❌ 不使用 ES 模块（`type="module"`）
2. ✅ 所有代码都内联在 HTML 中
3. ✅ 不需要加载外部文件
4. ✅ 使用 IIFE（立即执行函数）格式

### 文件大小

```
dist/index.html:        ~0.7 KB
dist/game.js:           ~63 KB
dist/game.css:          ~3.6 KB
总计:                   ~67 KB

game-standalone.html:   ~70 KB (所有内容在一个文件中)
```

---

## 🎯 快速决策树

```
需要直接打开？
├─ 是 → npm run build:standalone
└─ 否
    └─ 需要部署到服务器？
        ├─ 是 → npm run build
        └─ 否
            └─ 需要开发调试？
                ├─ 是 → npm run dev
                └─ 否 → npm run preview
```

---

## ❓ 常见问题

**Q: 为什么 dist/index.html 不能直接打开？**
A: 因为它使用了 ES 模块，浏览器的安全策略不允许 `file://` 协议加载模块。

**Q: game-standalone.html 和 dist/index.html 有什么区别？**
A: game-standalone.html 把所有代码内联了，可以直接打开；dist/index.html 需要服务器。

**Q: 哪个文件最适合分享？**
A: `game-standalone.html`，接收者直接双击就能玩。

**Q: 游戏数据会保存吗？**
A: 不会，刷新页面游戏会重置。如需保存，可以添加 localStorage。

---

## 🎉 立即开始！

```bash
# 生成可直接打开的 HTML 文件
npm run build:standalone

# 双击打开
game-standalone.html
```

享受游戏吧！🎮

